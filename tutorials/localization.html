<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="57x57" href="/static/images/icons/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/static/images/icons/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/static/images/icons/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/static/images/icons/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/static/images/icons/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/static/images/icons/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/static/images/icons/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/static/images/icons/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/static/images/icons/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/static/images/icons/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/images/icons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/static/images/icons/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/images/icons/favicon-16x16.png"/><meta name="viewport" content="width=device-width"/><link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css"/><link rel="stylesheet" type="text/css" href="/static/css/bebasNeue.css"/><link rel="stylesheet" type="text/css" href="/static/css/animations.css"/><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,800|Roboto:100,300,400,500,700,900" rel="stylesheet"/><title>Actionhero</title><script src="/static/js/googleAnalytics.js"></script><meta name="next-head-count" content="21"/><link rel="preload" href="/_next/static/vBG3dM9s2qLQ1kIyb6dtK/pages/tutorials/%5Bname%5D.js" as="script"/><link rel="preload" href="/_next/static/vBG3dM9s2qLQ1kIyb6dtK/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-91b117697e716c22a78b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.dbd31ae8fa0e794339d4.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.951ee3a86146f43ff3ef.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-b144c423d08dce06aeec.js" as="script"/><link rel="preload" href="/_next/static/chunks/85f3d9d6d98e589ca7c5aa5decd9e952f562130e.df8ba5aacf2336156dd7.js" as="script"/><link rel="preload" href="/_next/static/chunks/902625a4d7436df52187e9dd4b9de8a7af5b1263.fee39761db1fc475c2ba.js" as="script"/><link rel="preload" href="/_next/static/chunks/75bd5f9c0a63e5fb2e1a1530b1d99b62e2b455f2.f4cec1a1186f868c77e4.js" as="script"/></head><body><div id="__next"><div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300" class="container-fluid"><div style="text-align:center;padding:10px;background-color:#FFFFFF;border-bottom:5px solid #E14E3A"><p><strong>We need your input!</strong><br/><br/>The Actionhero Team is working on our plans for 2020 and would like to solicit input from our community. <br/>Please take 5 to complete our<!-- --> <strong><a href="https://forms.gle/ZMmCqGN7pvgHKdz57" target="_blank">2020 Developer Survey</a></strong>! .</p></div><header style="background-color:#2F5266"><div class="container"><nav style="background-color:#2F5266;padding-top:5px;margin-bottom:10px;border:0" class="navbar navbar-default"><div class="container"><div class="navbar-header"><a style="padding-top:0;margin-bottom:15px" class="navbar-brand"><img src="/static/images/actionhero-logo-header-wordmark.svg" style="padding-top:14px;padding-bottom:20px"/></a><button type="button" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"></ul><ul class="hidden-md hidden-sm hidden-xs nav navbar-nav navbar-left"><li role="presentation" class=""><a role="button" href="#"> </a></li><li role="presentation" class=""><a role="button" href="#"> </a></li></ul><ul class="nav navbar-nav navbar-left"><li role="presentation" class="hidden-sm"><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Why Actionhero</span></a></li><li role="presentation" class=""><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Downloads</span></a></li><li role="presentation" class=""><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Tutorials</span></a></li><li role="presentation" class=""><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Documentation</span></a></li><li role="presentation" class="hidden-sm"><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Plugins</span></a></li><li role="presentation" class=""><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Community</span></a></li><li role="presentation" class=""><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Shop</span></a></li></ul><ul class="nav navbar-nav navbar-right"><div><a style="text-decoration:none" href="/get-started"><button style="font-family:Roboto, sans-serif;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;font-weight:300;margin-top:20px;margin-bottom:0;margin-left:10px;margin-right:10px;outline:none" type="button" class="btn btn-lg btn-default btn-block">Get Started</button></a></div></ul></div></div></nav></div></header></div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300" class="container-fluid"><div style="background-color:#FBF9E4;color:#2F5266;font-weight:200;padding:50px"><div class="container"><div class="row"><div style="text-align:center" class="col-md-3"><img src="/static/images/localization.svg"/></div><div style="text-align:center" class="col-md-6"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px"><br/>Localization</h1></div><div class="col-md-3"></div></div></div></div><div style="height:183px;background:url(&quot;/static/images/clouds-white.svg&quot;) no-repeat center #FBF9E4"></div><div style="padding-bottom:100px" class="container"><div class="row"><div id="_top"></div><div id="docPageContent" class="col-md-12"><div id="tutorialPageContent" class="row"><div class="col-md-9"><div><div id="Overview"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Overview</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>Actionhero uses the <a href="https://github.com/mashpie/i18n-node">i18n</a> module to localize responses to clients.</p><div><div id="Locale Files"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Locale Files</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><ul><li>When running Actionhero with <code>config.i18n.updateFiles = true</code>, you will see Actionhero generate a &#x27;locales&#x27; folder at the top level of your project which will contain translations of all strings in your project with are passed though the new localization system. This includes all uses of <code>i18n.localize</code> and <code>connection.localize</code>.</li><li>We use mustache-style localization</li><li>From here, it is an easy matter to change the strings, per locale, to how you would like them presented back in your application. The next time you restart the server, the values you&#x27;ve updated in your locale strings file will be used.</li><li>disable <code>config.i18n.updateFiles</code> if you do not want this behavior.</li></ul><div><div id="Connection Locale"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Connection Locale</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><p>Since every Actionhero implementation is unique, we do not ship with a &quot;guess&quot; about how to determine a given connection&#x27;s locale. Perhaps you have an HTTP server and you can trust your client&#x27;s <code>accept-language</code> headers. Or perhaps you run your API under a number of different host names and you can presume locale based on them. Whatever the case, you need to create a async method in an initializer which will be called when each connection connects to return its locale.</p><p>For example, I may have an initializer in my project like this:</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#954121">const</span> { Initializer } = <span style="color:#0086b3">require</span>(<span style="color:#219161">&quot;actionhero&quot;</span>);

<span style="color:#954121">export</span> <span style="color:#954121">class</span> DetermineConnectionLocale <span style="color:#954121">extends</span> Initializer {
  <span style="color:#954121">constructor</span>(<span style="color:#00f"></span>) {
    <span style="color:#954121">super</span>();
    <span style="color:#954121">this</span>.name = <span style="color:#219161">&quot;determineConnectionLocale&quot;</span>;
  }

  initialize() {
    api.customLocalization = {
      lookup: <span class="hljs-function"><span style="color:#00f">connection</span> =&gt;</span> {
        <span style="color:#954121">let</span> locale = <span style="color:#219161">&quot;en&quot;</span>;

        <span style="color:#954121">if</span> (connection.type === <span style="color:#219161">&quot;web&quot;</span>) {
          <span style="color:#954121">const</span> host = connection.rawConnection.req.headers.host;
          <span style="color:#954121">if</span> (host === <span style="color:#219161">&quot;usa.site.com&quot;</span>) {
            locale = <span style="color:#219161">&quot;en-US&quot;</span>;
          }
          <span style="color:#954121">if</span> (host === <span style="color:#219161">&quot;uk.site.com&quot;</span>) {
            locale = <span style="color:#219161">&quot;en-GB&quot;</span>;
          }
          <span style="color:#954121">if</span> (host === <span style="color:#219161">&quot;es.site.com&quot;</span>) {
            locale = <span style="color:#219161">&quot;es-ES&quot;</span>;
          }
          <span style="color:#954121">if</span> (host === <span style="color:#219161">&quot;mx.site.com&quot;</span>) {
            locale = <span style="color:#219161">&quot;es-MX&quot;</span>;
          }
        }

        <span style="color:#954121">return</span> locale;
      }
    };
  }
}</code></pre><p>To tell i18n to use this method with a new connection, set <code>config.i18n.determineConnectionLocale = &#x27;api.customLocalization.lookup&#x27;</code>. Now you can localize responses in actions, based on which hostname a connection uses.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#954121">import</span> { Action } <span style="color:#954121">from</span> <span style="color:#219161">&quot;actionhero&quot;</span>;

<span style="color:#954121">export</span> <span style="color:#954121">class</span> RandomNumber <span style="color:#954121">extends</span> Action {
  <span style="color:#954121">constructor</span>(<span style="color:#00f"></span>) {
    <span style="color:#954121">super</span>();
    <span style="color:#954121">this</span>.name = <span style="color:#219161">&quot;randomNumber&quot;</span>;
    <span style="color:#954121">this</span>.description =
      <span style="color:#219161">&quot;I am an API method which will generate a random number, returning both the number and a localized string&quot;</span>;
    <span style="color:#954121">this</span>.outputExample = {
      <span style="color:#0086b3">number</span>: <span style="color:#40a070">0.234</span>,
      localizedResponse: <span style="color:#219161">&quot;Your random number is 0.234&quot;</span>
    };
  }

  <span style="color:#954121">async</span> run({ connection, response }) {
    <span style="color:#954121">const</span> <span style="color:#0086b3">number</span> = <span style="color:#0086b3">Math</span>.random();
    <span style="color:#954121">const</span> localizedResponse = connection.localize([
      <span style="color:#219161">&quot;Your random number is {{number}}&quot;</span>,
      { <span style="color:#0086b3">number</span>: <span style="color:#0086b3">number</span> }
    ]);
    response.message = localizedResponse;
    response.number = <span style="color:#0086b3">number</span>;
  }
}</code></pre><div><div id="Connection Methods"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Connection Methods</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><ul><li><code>connection.localize(string)</code> or <code>connection.localize([string-with-interpolation, values])</code><ul><li>Allows you to interpolate a string based on the connection&#x27;s current locale. For example, say in an action you wanted to respond with <code>{CountExample}</code> In your locale files, you would define <code>the count was {{count}}</code> in every language you cared about, and not need to modify the action itself at all.</li></ul></li></ul><div><div id="Other Strings"><br/><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Other Strings</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div></div><ul><li>To localize strings that are not used in methods mentioned above you can use <code>api.i18n.localize(string, options)</code>.<ul><li>Allows you to interpolate a string.</li><li>Just as the other localize methods above, the input string will be in your locale files for you to change it anytime you want.</li><li>The second <code>options</code> optional argument (default value is <code>api.i18n</code>) allows you to <a href="https://github.com/mashpie/i18n-node#list-of-all-configuration-options">configure</a> i18n. Note that you will use this argument only in very few special cases, It is recommended to edit the global <code>api.config.i18n</code> settings to suit your localization needs.</li></ul></li></ul></div><div class="hidden-xs hidden-sm col-md-3"><div style="height:0"><div style="padding-top:90px;position:sticky;top:0"><ul style="list-style-type:none;padding-left:0;margin-left:0"></ul></div></div></div></div><br/><div><a style="text-decoration:none" href="/tutorials"><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-lg btn-default btn-block">Back to Tutorials</button></a></div></div><div class="hidden-xs hidden-sm col-md-3"></div></div></div><div style="background-color:#6E8898;color:#2F5266;font-weight:300;padding-top:100px;padding-bottom:100px"><div class="container"><div class="row"><div class="col-md-2"></div><div style="text-align:center;color:#FBF9E4;padding-bottom:100px" class="col-md-8"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Solutions</h1><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="color:#FBF9E4">Actionhero was built from the ground up to include all the features you expect from a modern API framework.</span></h2></div><div class="col-md-2"></div></div><div class="row"><div class="col-md-4"><div style="width:100%;padding-top:40px;padding-bottom:40px;padding-left:40px;padding-right:50px;background-color:#FBF9E4;box-shadow:0px 2px 4px #003C51"><div style="text-align:center;padding-bottom:10px"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Open Source</h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>The Actionhero server is open source, under the Apache-2 license</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>Actionhero runs on Linux, OS X, and Windows</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>You always have access to the Actionhero team via<!-- --> <a href="/community">Slack and Github</a></p><br/><br/><div><a style="text-decoration:none" href="/downloads"><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-lg btn-default btn-block">Download</button></a></div></div></div><div class="hidden-md hidden-lg hidden-xl col-md-4"><div style="width:100%;padding:20px;background-color:#2F5266;color:#FFFFFF;box-shadow:0px 2px 4px #003C51"><div style="text-align:center"><img src="/static/images/dog.svg"/><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px"><span style="color:#FBF9E4">Premium Training &amp; Review</span></h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We provide support for corporate &amp; nonprofit customers starting at a flat rate of $150/hr. Our services include:</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><ul><li><strong>Remote training for your team</strong></li><li><strong>Code Reviews</strong></li><li><strong>Best Practices Audits</strong></li><li><strong>Custom plugin &amp; Feature Development</strong></li></ul><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We have packages appropriate for all company sizes. Contact us to learn more.</p><br/><div><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-lg btn-default btn-block">Contact Us</button></div></div></div><div class="hidden-xs hidden-sm col-md-4"><div style="width:125%;padding:40px;background-color:#2F5266;color:#FFFFFF;position:relative;top:-60px;box-shadow:0px 2px 4px #003C51;margin-left:-13%;margin-right:-5%;z-index:10"><div style="text-align:center;padding-bottom:10px"><img src="/static/images/dog.svg"/><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Premium Training &amp; Review</h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We provide support for corporate &amp; nonprofit customers starting at a flat rate of $150/hr. Our services include:</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><ul><li><strong>Remote training for your team</strong></li><li><strong>Code Reviews</strong></li><li><strong>Best Practices Workshops</strong></li><li><strong>Custom plugin &amp; Feature Development</strong></li></ul><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We have packages appropriate for all company sizes. Contact us to learn more.</p><br/><div><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-lg btn-default btn-block">Contact Us</button></div></div></div><div class="col-md-4"><div style="width:100%;padding-top:40px;padding-bottom:40px;padding-right:40px;padding-left:50px;background-color:#FBF9E4;box-shadow:0px 2px 4px #003C51"><div style="text-align:center;padding-bottom:10px"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Enterprise</h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>For larger customers in need of a support contract, we offer an enterprise plan including everything in the Premium plan plus:</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><ul><li><strong>24/7 access to core members of the Actionhero Team</strong></li><li><strong>Emergency response packages</strong></li><li><strong>Deployment support</strong></li><li><strong>...and custom development against Actionhero’s core as needed.</strong></li></ul><br/><div><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-lg btn-default btn-block">Contact Us</button></div></div></div></div></div></div></div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300" class="container-fluid"><footer id="footer-container" style="background-color:#2F5266;color:#FBF9E4;font-family:Roboto, sans-serif;font-weight:200"><div class="container"><div style="padding-bottom:50px;padding-top:50px;padding-left:100px" class="row"><div class="col-md-12"><img src="/static/images/actionhero-logo-header-wordmark.svg"/></div></div><div style="padding-bottom:100px" class="row"><div class="col-md-4"><div style="padding-left:100px"><p><a style="color:#FBF9E4" href="/terms">Terms</a></p><p>Contact us at<!-- --> <a style="color:#FBF9E4;font-weight:500" href="mailto:hello@actionherojs.com">hello@actionherojs.com</a></p><p>You can contribute to this website<!-- --> <a style="color:#FBF9E4;font-weight:500" href="https://github.com/actionhero/www.actionherojs.com" target="_blank">here</a>.</p><p><a href="https://medium.com/tag/actionherojs/latest" target="_new" style="color:#FBF9E4">Blogs</a></p><p style="color:#FFFFFF;font-weight:bold">© 2020<!-- --> <!-- -->Actionhero</p></div></div><div class="col-md-4"><div style="padding-left:100px"><p><a style="color:#FBF9E4" href="/why">Why Actionhero</a></p><p><a style="color:#FBF9E4" href="/get-started">Get Started</a></p><p><a href="https://docs.actionherojs.com" style="color:#FBF9E4">Documenation</a></p><p><a style="color:#FBF9E4" href="/solutions">Solutions</a></p><p><a style="color:#FBF9E4" href="/community">Community</a></p><p><a style="color:#FBF9E4" href="/downloads">Downloads</a></p></div></div><div class="col-md-4"><div style="padding-left:100px"><p><a href="https://www.npmjs.com/package/actionhero" target="_new" style="color:#FBF9E4">NPM</a></p><p><a href="https://twitter.com/actionherojs" target="_new" style="color:#FBF9E4">Twitter</a></p><p><a href="https://slack.actionherojs.com/" target="_new" style="color:#FBF9E4">Slack</a></p><p><a href="https://github.com/Actionhero/Actionhero" target="_new" style="color:#FBF9E4">Github</a></p><p><a href="https://actionherojs.threadless.com" target="_new" style="color:#FBF9E4">Shop</a></p></div></div></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"markdown":"## Overview\n\nActionhero uses the [i18n](https://github.com/mashpie/i18n-node) module to localize responses to clients.\n\n## Locale Files\n\n- When running Actionhero with `config.i18n.updateFiles = true`, you will see Actionhero generate a 'locales' folder at the top level of your project which will contain translations of all strings in your project with are passed though the new localization system. This includes all uses of `i18n.localize` and `connection.localize`.\n- We use mustache-style localization\n- From here, it is an easy matter to change the strings, per locale, to how you would like them presented back in your application. The next time you restart the server, the values you've updated in your locale strings file will be used.\n- disable `config.i18n.updateFiles` if you do not want this behavior.\n\n## Connection Locale\n\nSince every Actionhero implementation is unique, we do not ship with a \"guess\" about how to determine a given connection's locale. Perhaps you have an HTTP server and you can trust your client's `accept-language` headers. Or perhaps you run your API under a number of different host names and you can presume locale based on them. Whatever the case, you need to create a async method in an initializer which will be called when each connection connects to return its locale.\n\nFor example, I may have an initializer in my project like this:\n\n```ts\nconst { Initializer } = require(\"actionhero\");\n\nexport class DetermineConnectionLocale extends Initializer {\n  constructor() {\n    super();\n    this.name = \"determineConnectionLocale\";\n  }\n\n  initialize() {\n    api.customLocalization = {\n      lookup: connection =\u003e {\n        let locale = \"en\";\n\n        if (connection.type === \"web\") {\n          const host = connection.rawConnection.req.headers.host;\n          if (host === \"usa.site.com\") {\n            locale = \"en-US\";\n          }\n          if (host === \"uk.site.com\") {\n            locale = \"en-GB\";\n          }\n          if (host === \"es.site.com\") {\n            locale = \"es-ES\";\n          }\n          if (host === \"mx.site.com\") {\n            locale = \"es-MX\";\n          }\n        }\n\n        return locale;\n      }\n    };\n  }\n}\n```\n\nTo tell i18n to use this method with a new connection, set `config.i18n.determineConnectionLocale = 'api.customLocalization.lookup'`. Now you can localize responses in actions, based on which hostname a connection uses.\n\n```ts\nimport { Action } from \"actionhero\";\n\nexport class RandomNumber extends Action {\n  constructor() {\n    super();\n    this.name = \"randomNumber\";\n    this.description =\n      \"I am an API method which will generate a random number, returning both the number and a localized string\";\n    this.outputExample = {\n      number: 0.234,\n      localizedResponse: \"Your random number is 0.234\"\n    };\n  }\n\n  async run({ connection, response }) {\n    const number = Math.random();\n    const localizedResponse = connection.localize([\n      \"Your random number is {{number}}\",\n      { number: number }\n    ]);\n    response.message = localizedResponse;\n    response.number = number;\n  }\n}\n```\n\n## Connection Methods\n\n- `connection.localize(string)` or `connection.localize([string-with-interpolation, values])`\n  - Allows you to interpolate a string based on the connection's current locale. For example, say in an action you wanted to respond with `{CountExample}` In your locale files, you would define `the count was {{count}}` in every language you cared about, and not need to modify the action itself at all.\n\n## Other Strings\n\n- To localize strings that are not used in methods mentioned above you can use `api.i18n.localize(string, options)`.\n  - Allows you to interpolate a string.\n  - Just as the other localize methods above, the input string will be in your locale files for you to change it anytime you want.\n  - The second `options` optional argument (default value is `api.i18n`) allows you to [configure](https://github.com/mashpie/i18n-node#list-of-all-configuration-options) i18n. Note that you will use this argument only in very few special cases, It is recommended to edit the global `api.config.i18n` settings to suit your localization needs.\n","name":"localization"}},"page":"/tutorials/[name]","query":{"name":"localization"},"buildId":"vBG3dM9s2qLQ1kIyb6dtK","nextExport":true,"isFallback":false}</script><script nomodule="" src="/_next/static/runtime/polyfills-2fff68c13affbed5c162.js"></script><script async="" data-next-page="/tutorials/[name]" src="/_next/static/vBG3dM9s2qLQ1kIyb6dtK/pages/tutorials/%5Bname%5D.js"></script><script async="" data-next-page="/_app" src="/_next/static/vBG3dM9s2qLQ1kIyb6dtK/pages/_app.js"></script><script src="/_next/static/runtime/webpack-91b117697e716c22a78b.js" async=""></script><script src="/_next/static/chunks/framework.dbd31ae8fa0e794339d4.js" async=""></script><script src="/_next/static/chunks/commons.951ee3a86146f43ff3ef.js" async=""></script><script src="/_next/static/runtime/main-b144c423d08dce06aeec.js" async=""></script><script src="/_next/static/chunks/85f3d9d6d98e589ca7c5aa5decd9e952f562130e.df8ba5aacf2336156dd7.js" async=""></script><script src="/_next/static/chunks/902625a4d7436df52187e9dd4b9de8a7af5b1263.fee39761db1fc475c2ba.js" async=""></script><script src="/_next/static/chunks/75bd5f9c0a63e5fb2e1a1530b1d99b62e2b455f2.f4cec1a1186f868c77e4.js" async=""></script><script src="/_next/static/vBG3dM9s2qLQ1kIyb6dtK/_buildManifest.js" async=""></script></body></html>