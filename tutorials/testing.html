<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="57x57" href="/static/images/icons/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/static/images/icons/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/static/images/icons/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/static/images/icons/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/static/images/icons/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/static/images/icons/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/static/images/icons/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/static/images/icons/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/static/images/icons/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/static/images/icons/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/images/icons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/static/images/icons/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/images/icons/favicon-16x16.png"/><meta name="viewport" content="width=device-width"/><link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css"/><link rel="stylesheet" type="text/css" href="/static/css/bebasNeue.css"/><link rel="stylesheet" type="text/css" href="/static/css/animations.css"/><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,800|Roboto:100,300,400,500,700,900" rel="stylesheet"/><title>Actionhero</title><script src="/static/js/googleAnalytics.js"></script><meta name="next-head-count" content="21"/><link rel="preload" href="/_next/static/35oW7JSExR43IpR5WpolR/pages/tutorials/%5Bname%5D.js" as="script"/><link rel="preload" href="/_next/static/35oW7JSExR43IpR5WpolR/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-08f7b238829422e3b9b2.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.fb8e90ce3bafc15ecdd8.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-2325b25da04a50e601b5.js" as="script"/></head><body><div id="__next"><div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300" class="container-fluid"><header style="background-color:#2F5266"><div class="container"><nav style="background-color:#2F5266;padding-top:5px;margin-bottom:10px;border:0" class="navbar navbar-default"><div class="container"><div class="navbar-header"><a style="padding-top:0;margin-bottom:15px" class="navbar-brand"><img src="/static/images/Actionhero-logo-header-wordmark.svg" style="padding-top:14px;padding-bottom:20px"/></a><button type="button" class="navbar-toggle collapsed"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"></ul><ul class="hidden-md hidden-sm hidden-xs nav navbar-nav navbar-left"><li role="presentation" class=""><a role="button" href="#"> </a></li><li role="presentation" class=""><a role="button" href="#"> </a></li></ul><ul class="nav navbar-nav navbar-left"><li role="presentation" class="hidden-sm"><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Why Actionhero</span></a></li><li role="presentation" class=""><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Downloads</span></a></li><li role="presentation" class=""><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Tutorials</span></a></li><li role="presentation" class=""><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Documentation</span></a></li><li role="presentation" class="hidden-sm"><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Plugins</span></a></li><li role="presentation" class=""><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Community</span></a></li><li role="presentation" class=""><a role="button" href="#"><span style="line-height:3;color:#FFFFFF;padding-bottom:10px;font-weight:300">Shop</span></a></li></ul><ul class="nav navbar-nav navbar-right"><div><a style="text-decoration:none" href="/get-started"><button style="font-family:Roboto, sans-serif;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;font-weight:300;margin-top:20px;margin-bottom:0;margin-left:10px;margin-right:10px;outline:none" type="button" class="btn btn-lg btn-default btn-block">Get Started</button></a></div></ul></div></div></nav></div></header></div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300" class="container-fluid"><div style="background-color:#FBF9E4;color:#2F5266;font-weight:200;padding:50px"><div class="container"><div class="row"><div style="text-align:center" class="col-md-3"><img src="/static/images/flying-man.svg"/></div><div style="text-align:center" class="col-md-6"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px"><br/>Testing</h1></div><div class="col-md-3"></div></div></div></div><div style="height:183px;background:url(&quot;/static/images/clouds-white.svg&quot;) no-repeat center #FBF9E4"></div><div style="padding-bottom:100px" class="container"><div class="row"><div id="_top"></div><div id="docPageContent" class="col-md-12"><div class="row"><div class="col-md-9"><div><br/><h2 id="Overview" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Overview</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div><p>Actionhero provides test helpers so that you may try your actions and tasks within a headless environment. We do this by including a <code>specHelper</code> initializer which creates a server, <code>testServer</code> when running within the test environment. Via the <code>testServer</code>, you can easily call actions or tasks without making a real request.</p><p>We have chosen <a href="https://facebook.github.io/jest">jest</a> as our test framework which is included as dependencies within all new projects generated with <code>Actionhero generate</code>. You do not need to use these testing tools, but an example will be provided which makes use of them.</p><p>You also don&#x27;t need to use these test helpers, and you may want to make a real http or websocket request to test something specific. If this is the case, you can <a href="https://github.com/Actionhero/Actionhero/tree/master/test/servers">check out how Actionhero tests its own servers</a> for examples.</p><div><br/><h2 id="Getting Started" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Getting Started</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// package.json from a new Actionhero project with \`jest\`included</span>

{
  <span style="color:#219161">&quot;author&quot;</span>: <span style="color:#219161">&quot;YOU &lt;YOU@example.com&gt;&quot;</span>,
  <span style="color:#219161">&quot;name&quot;</span>: <span style="color:#219161">&quot;my_actionhero_project&quot;</span>,
  <span style="color:#219161">&quot;description&quot;</span>: <span style="color:#219161">&quot;my Actionhero project&quot;</span>,
  <span style="color:#219161">&quot;version&quot;</span>: <span style="color:#219161">&quot;0.1.0&quot;</span>,
  <span style="color:#219161">&quot;engines&quot;</span>: {
    <span style="color:#219161">&quot;node&quot;</span>: <span style="color:#219161">&quot;&gt;=8.0.0&quot;</span>
  },
  <span style="color:#219161">&quot;dependencies&quot;</span>: {

    <span style="color:#219161">&quot;Actionhero&quot;</span>: <span style="color:#219161">&quot;21.x.x&quot;</span>,
    <span style="color:#219161">&quot;ws&quot;</span>: <span style="color:#219161">&quot;latest&quot;</span>,
    <span style="color:#219161">&quot;ioredis&quot;</span>: <span style="color:#219161">&quot;latest&quot;</span>,
    <span style="color:#219161">&quot;winston&quot;</span>: <span style="color:#219161">&quot;latest&quot;</span>
  },
  <span style="color:#219161">&quot;devDependencies&quot;</span>: {
    <span style="color:#219161">&quot;@types/node&quot;</span>: <span style="color:#219161">&quot;latest&quot;</span>,
    <span style="color:#219161">&quot;@types/jest&quot;</span>: <span style="color:#219161">&quot;latest&quot;</span>,
    <span style="color:#219161">&quot;jest&quot;</span>: <span style="color:#219161">&quot;latest&quot;</span>,
    <span style="color:#219161">&quot;prettier&quot;</span>: <span style="color:#219161">&quot;latest&quot;</span>,
    <span style="color:#219161">&quot;ts-jest&quot;</span>: <span style="color:#219161">&quot;latest&quot;</span>,
    <span style="color:#219161">&quot;ts-node-dev&quot;</span>: <span style="color:#219161">&quot;latest&quot;</span>,
    <span style="color:#219161">&quot;typescript&quot;</span>: <span style="color:#219161">&quot;latest&quot;</span>
  },
  <span style="color:#219161">&quot;scripts&quot;</span>: {
    <span style="color:#219161">&quot;dev&quot;</span>: <span style="color:#219161">&quot;ts-node-dev --transpile-only ./node_modules/.bin/Actionhero start&quot;</span>,
    <span style="color:#219161">&quot;start&quot;</span>: <span style="color:#219161">&quot;Actionhero start&quot;</span>,
    <span style="color:#219161">&quot;Actionhero&quot;</span>: <span style="color:#219161">&quot;Actionhero&quot;</span>,
    <span style="color:#219161">&quot;test&quot;</span>: <span style="color:#219161">&quot;jest&quot;</span>,
    <span style="color:#219161">&quot;pretest&quot;</span>: <span style="color:#219161">&quot;npm run build &amp;&amp; npm run lint&quot;</span>,
    <span style="color:#219161">&quot;build&quot;</span>: <span style="color:#219161">&quot;tsc --declaration&quot;</span>,
    <span style="color:#219161">&quot;lint&quot;</span>: <span style="color:#219161">&quot;prettier --check src/*/** __test__/*/**&quot;</span>,
    <span style="color:#219161">&quot;pretty&quot;</span>: <span style="color:#219161">&quot;prettier --write src/*/** __test__/*/**&quot;</span>
  },
  <span style="color:#219161">&quot;jest&quot;</span>: {
    <span style="color:#219161">&quot;testEnvironment&quot;</span>: <span style="color:#219161">&quot;node&quot;</span>,
    <span style="color:#219161">&quot;transform&quot;</span>: {
      <span style="color:#219161">&quot;^.+\\.ts?$&quot;</span>: <span style="color:#219161">&quot;ts-jest&quot;</span>
    }
  }
}</code></pre><p>To run a jest test suite, you invoke the jest binary, <code>./node_modules/.bin/jest</code> or <code>npx jest</code>. This will tell jest to look in your <code>./__tests__</code> folder and run any tests that it can find. There are ways to change the test folder location, only run specific tests, change the reporting format and more which you can learn about on <a href="https://facebook.github.io/jest">Jest&#x27;s website</a>. We assume that you have <code>jest</code> installed to your project by listing it in your <code>package.json</code>. If you used <code>Actionhero generate</code> to create your project, this should already be configured for you.</p><p>The majority of the time, you&#x27;ll be testing actions and other methods you have written, so you&#x27;ll need to &quot;run&quot; an Actionhero server as part of your test suite. Many times you&#x27;ll want to have Actionhero behave in a slightly unique way while testing (perhaps connect to a special database, don&#x27;t log, etc). To do this, you can change the behavior of the config files for the <code>test</code> environment. Here is how we tell Actionhero <a href="https://github.com/Actionhero/Actionhero/blob/master/config/logger.js#L48-L54">not to write any logs when testing</a>. Note the test-specific configuration overrides the defaults. Jest will automatically set <code>NODE_ENV=test</code> for you.</p><p>Actionhero comes with a <code>specHelper</code> to make it easier to test tasks and actions. This specHelper is a special <a href="/docs/core/#servers">server</a> which can check things without needing to make an HTTP, websocket, etc request. If you need to check the true behavior of a server (perhaps how the router works for an HTTP request), you should make a real HTTP request in your test suite, using something like the <a href="https://github.com/request/request">request</a> library (<a href="https://github.com/Actionhero/Actionhero/blob/master/test/servers/web.js#L178-L184">example</a>).</p><div><br/><h2 id="Example Test" style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="font-weight:300;font-size:36px">Example Test</span></h2><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/></div><p>Say you had an action that was supposed to respond with a <code>randomNumber</code>, and you wanted to write a test for it.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code><span style="color:#408080;font-style:italic">// from __tests__/actions/randomNumber.ts</span>
<span style="color:#954121">import</span> { Process, specHelper } <span style="color:#954121">from</span> <span style="color:#219161">&quot;Actionhero&quot;</span>;

<span style="color:#954121">const</span> Actionhero = <span style="color:#954121">new</span> Process();

describe(<span style="color:#219161">&quot;Action&quot;</span>, () =&gt; {
  describe(<span style="color:#219161">&quot;randomNumber&quot;</span>, () =&gt; {
    beforeAll(<span style="color:#954121">async</span> () =&gt; {
      <span style="color:#954121">await</span> Actionhero.start();
    });

    afterAll(<span style="color:#954121">async</span> () =&gt; {
      <span style="color:#954121">await</span> Actionhero.stop();
    });

    <span style="color:#954121">let</span> firstNumber = <span style="color:#954121">null</span>;

    test(<span style="color:#219161">&quot;generates random numbers&quot;</span>, <span style="color:#954121">async</span> () =&gt; {
      <span style="color:#954121">const</span> { randomNumber } = <span style="color:#954121">await</span> specHelper.runAction(<span style="color:#219161">&quot;randomNumber&quot;</span>);
      expect(randomNumber).toBeGreaterThan(<span style="color:#40a070">0</span>);
      expect(randomNumber).toBeLessThan(<span style="color:#40a070">1</span>);
      firstNumber = randomNumber;
    });

    test(<span style="color:#219161">&quot;is unique / random&quot;</span>, <span style="color:#954121">async</span> () =&gt; {
      <span style="color:#954121">const</span> { randomNumber } = <span style="color:#954121">await</span> specHelper.runAction(<span style="color:#219161">&quot;randomNumber&quot;</span>);
      expect(randomNumber).toBeGreaterThan(<span style="color:#40a070">0</span>);
      expect(randomNumber).toBeLessThan(<span style="color:#40a070">1</span>);
      expect(randomNumber).not.toEqual(firstNumber);
    });
  });
});</code></pre><p>More details on the specHelper methods <a href="https://docs.actionherojs.com/modules/spechelper.html">can be found here</a>. Methods include:</p><ul><li><code>buildConnection</code></li><li><code>findEnqueuedTasks</code></li><li><code>getStaticFile</code></li><li><code>runAction</code></li><li><code>runFullTask</code></li><li><code>runTask</code></li></ul><p>If you want to see fuller example of how to create an integration test within Actionhero, please <a href="https://github.com/Actionhero/Actionhero-tutorial#testing">check out the tutorial</a></p></div><div class="col-md-3"><div style="padding-top:90px"><ul style="list-style-type:none;padding-left:0;margin-left:0"></ul></div></div></div><hr/><p>Back to<!-- --> <a href="/tutorials">Tutorials</a></p></div><div class="hidden-xs hidden-sm col-md-3"></div></div></div><div style="background-color:#6E8898;color:#2F5266;font-weight:300;padding-top:100px;padding-bottom:100px"><div class="container"><div class="row"><div class="col-md-2"></div><div style="text-align:center;color:#FBF9E4;padding-bottom:100px" class="col-md-8"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Solutions</h1><h2 style="font-family:Roboto, sans-serif;font-weight:300;font-size:20px;line-height:1.5em;color:#3B5D72"><span style="color:#FBF9E4">Actionhero was built from the ground up to include all the features you expect from a modern API framework.</span></h2></div><div class="col-md-2"></div></div><div class="row"><div class="col-md-4"><div style="width:100%;padding-top:40px;padding-bottom:40px;padding-left:40px;padding-right:50px;background-color:#FBF9E4;box-shadow:0px 2px 4px #003C51"><div style="text-align:center;padding-bottom:10px"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Open Source</h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>The Actionhero server is open source, under the Apache-2 license</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>Actionhero runs on Linux, OS X, and Windows</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>You always have access to the Actionhero team via<!-- --> <a href="/community">Slack and Github</a></p><br/><br/><div><a style="text-decoration:none" href="/downloads"><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-lg btn-default btn-block">Download</button></a></div></div></div><div class="hidden-md hidden-lg hidden-xl col-md-4"><div style="width:100%;padding:20px;background-color:#2F5266;color:#FFFFFF;box-shadow:0px 2px 4px #003C51"><div style="text-align:center"><img src="/static/images/dog.svg"/><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px"><span style="color:#FBF9E4">Premium Training &amp; Review</span></h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We provide support for corporate &amp; nonprofit customers starting at a flat rate of $150/hr. Our services include:</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><ul><li><strong>Remote training for your team</strong></li><li><strong>Code Reviews</strong></li><li><strong>Best Practices Audits</strong></li><li><strong>Custom plugin &amp; Feature Development</strong></li></ul><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We have packages appropriate for all company sizes. Contact us to learn more.</p><br/><div><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-lg btn-default btn-block">Contact Us</button></div></div></div><div class="hidden-xs hidden-sm col-md-4"><div style="width:125%;padding:40px;background-color:#2F5266;color:#FFFFFF;position:relative;top:-60px;box-shadow:0px 2px 4px #003C51;margin-left:-13%;margin-right:-5%;z-index:10"><div style="text-align:center;padding-bottom:10px"><img src="/static/images/dog.svg"/><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Premium Training &amp; Review</h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We provide support for corperate &amp; nonprofit customers starting at a flat rate of $150/hr. Our services include:</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><ul><li><strong>Remote training for your team</strong></li><li><strong>Code Reviews</strong></li><li><strong>Best Practices Workshops</strong></li><li><strong>Custom plugin &amp; Feature Development</strong></li></ul><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>We have packages appropriate for all company sizes. Contact us to learn more.</p><br/><div><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-lg btn-default btn-block">Contact Us</button></div></div></div><div class="col-md-4"><div style="width:100%;padding-top:40px;padding-bottom:40px;padding-right:40px;padding-left:50px;background-color:#FBF9E4;box-shadow:0px 2px 4px #003C51"><div style="text-align:center;padding-bottom:10px"><h1 style="font-family:BebasNeue, Roboto, sans-serif;font-weight:bold;margin-top:20px;margin-bottom:10px;letter-spacing:2px;font-size:36px">Enterprise</h1></div><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><p>For larger customers in need of a support contract, we offer an enterprise plan including everything in the Premium plan plus:</p><hr style="color:#E14E3A;background-color:#E14E3A;border:0;height:2px"/><ul><li><strong>24/7 access to core members of the Actionhero Team</strong></li><li><strong>Emergency response packages</strong></li><li><strong>Deployment support</strong></li><li><strong>...and custom development against Actionhero’s core as needed.</strong></li></ul><br/><div><button style="font-family:Roboto, sans-serif;font-weight:300;font-size:14px;max-width:200px;border-radius:50px;margin:0 auto;color:#FFFFFF;background-color:#E14E3A;border-color:#E14E3A;margin-top:20px;margin-bottom:20px;padding-top:15px;padding-bottom:15px;outline:none" type="button" class="btn btn-lg btn-default btn-block">Contact Us</button></div></div></div></div></div></div></div><div style="padding-left:0;padding-right:0;font-family:Roboto, sans-serif;font-size:14px;font-weight:300" class="container-fluid"><footer id="footer-container" style="background-color:#2F5266;color:#FBF9E4;font-family:Roboto, sans-serif;font-weight:200"><div class="container"><div style="padding-bottom:50px;padding-top:50px;padding-left:100px" class="row"><div class="col-md-12"><img src="/static/images/Actionhero-logo-header-wordmark.svg"/></div></div><div style="padding-bottom:100px" class="row"><div class="col-md-4"><div style="padding-left:100px"><p><a style="color:#FBF9E4" href="/terms">Terms</a></p><p>Contact us at<!-- --> <a style="color:#FBF9E4;font-weight:500" href="mailto:hello@actionherojs.com">hello@actionherojs.com</a></p><p><a href="https://medium.com/tag/actionherojs/latest" target="_new" style="color:#FBF9E4">Blogs</a></p><p>© 2019<!-- --> <!-- -->Actionhero</p></div></div><div class="col-md-4"><div style="padding-left:100px"><p><a style="color:#FBF9E4" href="/why">Why Actionhero</a></p><p><a style="color:#FBF9E4" href="/get-started">Get Started</a></p><p><a href="https://docs.actionherojs.com" style="color:#FBF9E4">Documenation</a></p><p><a style="color:#FBF9E4" href="/solutions">Solutions</a></p><p><a style="color:#FBF9E4" href="/community">Community</a></p><p><a style="color:#FBF9E4" href="/downloads">Downloads</a></p></div></div><div class="col-md-4"><div style="padding-left:100px"><p><a href="https://www.npmjs.com/package/Actionhero" target="_new" style="color:#FBF9E4">NPM</a></p><p><a href="https://twitter.com/actionherojs" target="_new" style="color:#FBF9E4">Twitter</a></p><p><a href="https://slack.actionherojs.com/" target="_new" style="color:#FBF9E4">Slack</a></p><p><a href="https://github.com/Actionhero/Actionhero" target="_new" style="color:#FBF9E4">Github</a></p><p><a href="https://actionherojs.threadless.com" target="_new" style="color:#FBF9E4">Shop</a></p></div></div></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"dataManager":"[]","props":{"pageProps":{"markdown":"## Overview\n\nActionhero provides test helpers so that you may try your actions and tasks within a headless environment. We do this by including a `specHelper` initializer which creates a server, `testServer` when running within the test environment. Via the `testServer`, you can easily call actions or tasks without making a real request.\n\nWe have chosen [jest](https://facebook.github.io/jest) as our test framework which is included as dependencies within all new projects generated with `Actionhero generate`. You do not need to use these testing tools, but an example will be provided which makes use of them.\n\nYou also don't need to use these test helpers, and you may want to make a real http or websocket request to test something specific. If this is the case, you can [check out how Actionhero tests its own servers](https://github.com/Actionhero/Actionhero/tree/master/test/servers) for examples.\n\n## Getting Started\n\n```js\n// package.json from a new Actionhero project with \\`jest\\`included\n\n{\n  \"author\": \"YOU \u003cYOU@example.com\u003e\",\n  \"name\": \"my_actionhero_project\",\n  \"description\": \"my Actionhero project\",\n  \"version\": \"0.1.0\",\n  \"engines\": {\n    \"node\": \"\u003e=8.0.0\"\n  },\n  \"dependencies\": {\n\n    \"Actionhero\": \"21.x.x\",\n    \"ws\": \"latest\",\n    \"ioredis\": \"latest\",\n    \"winston\": \"latest\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"latest\",\n    \"@types/jest\": \"latest\",\n    \"jest\": \"latest\",\n    \"prettier\": \"latest\",\n    \"ts-jest\": \"latest\",\n    \"ts-node-dev\": \"latest\",\n    \"typescript\": \"latest\"\n  },\n  \"scripts\": {\n    \"dev\": \"ts-node-dev --transpile-only ./node_modules/.bin/Actionhero start\",\n    \"start\": \"Actionhero start\",\n    \"Actionhero\": \"Actionhero\",\n    \"test\": \"jest\",\n    \"pretest\": \"npm run build \u0026\u0026 npm run lint\",\n    \"build\": \"tsc --declaration\",\n    \"lint\": \"prettier --check src/*/** __test__/*/**\",\n    \"pretty\": \"prettier --write src/*/** __test__/*/**\"\n  },\n  \"jest\": {\n    \"testEnvironment\": \"node\",\n    \"transform\": {\n      \"^.+\\\\.ts?$\": \"ts-jest\"\n    }\n  }\n}\n```\n\nTo run a jest test suite, you invoke the jest binary, `./node_modules/.bin/jest` or `npx jest`. This will tell jest to look in your `./__tests__` folder and run any tests that it can find. There are ways to change the test folder location, only run specific tests, change the reporting format and more which you can learn about on [Jest's website](https://facebook.github.io/jest). We assume that you have `jest` installed to your project by listing it in your `package.json`. If you used `Actionhero generate` to create your project, this should already be configured for you.\n\nThe majority of the time, you'll be testing actions and other methods you have written, so you'll need to \"run\" an Actionhero server as part of your test suite. Many times you'll want to have Actionhero behave in a slightly unique way while testing (perhaps connect to a special database, don't log, etc). To do this, you can change the behavior of the config files for the `test` environment. Here is how we tell Actionhero [not to write any logs when testing](https://github.com/Actionhero/Actionhero/blob/master/config/logger.js#L48-L54). Note the test-specific configuration overrides the defaults. Jest will automatically set `NODE_ENV=test` for you.\n\nActionhero comes with a `specHelper` to make it easier to test tasks and actions. This specHelper is a special [server](/docs/core/#servers) which can check things without needing to make an HTTP, websocket, etc request. If you need to check the true behavior of a server (perhaps how the router works for an HTTP request), you should make a real HTTP request in your test suite, using something like the [request](https://github.com/request/request) library ([example](https://github.com/Actionhero/Actionhero/blob/master/test/servers/web.js#L178-L184)).\n\n## Example Test\n\nSay you had an action that was supposed to respond with a `randomNumber`, and you wanted to write a test for it.\n\n```js\n// from __tests__/actions/randomNumber.ts\nimport { Process, specHelper } from \"Actionhero\";\n\nconst Actionhero = new Process();\n\ndescribe(\"Action\", () =\u003e {\n  describe(\"randomNumber\", () =\u003e {\n    beforeAll(async () =\u003e {\n      await Actionhero.start();\n    });\n\n    afterAll(async () =\u003e {\n      await Actionhero.stop();\n    });\n\n    let firstNumber = null;\n\n    test(\"generates random numbers\", async () =\u003e {\n      const { randomNumber } = await specHelper.runAction(\"randomNumber\");\n      expect(randomNumber).toBeGreaterThan(0);\n      expect(randomNumber).toBeLessThan(1);\n      firstNumber = randomNumber;\n    });\n\n    test(\"is unique / random\", async () =\u003e {\n      const { randomNumber } = await specHelper.runAction(\"randomNumber\");\n      expect(randomNumber).toBeGreaterThan(0);\n      expect(randomNumber).toBeLessThan(1);\n      expect(randomNumber).not.toEqual(firstNumber);\n    });\n  });\n});\n```\n\nMore details on the specHelper methods [can be found here](https://docs.actionherojs.com/modules/spechelper.html). Methods include:\n\n- `buildConnection`\n- `findEnqueuedTasks`\n- `getStaticFile`\n- `runAction`\n- `runFullTask`\n- `runTask`\n\nIf you want to see fuller example of how to create an integration test within Actionhero, please [check out the tutorial](https://github.com/Actionhero/Actionhero-tutorial#testing)\n","name":"testing"}},"page":"/tutorials/[name]","query":{"name":"testing"},"buildId":"35oW7JSExR43IpR5WpolR","nextExport":true}</script><script nomodule="" src="/_next/static/runtime/polyfills-099147a670e7b68459d6.js"></script><script async="" data-next-page="/tutorials/[name]" src="/_next/static/35oW7JSExR43IpR5WpolR/pages/tutorials/%5Bname%5D.js"></script><script async="" data-next-page="/_app" src="/_next/static/35oW7JSExR43IpR5WpolR/pages/_app.js"></script><script src="/_next/static/runtime/webpack-08f7b238829422e3b9b2.js" async=""></script><script src="/_next/static/chunks/commons.fb8e90ce3bafc15ecdd8.js" async=""></script><script src="/_next/static/runtime/main-2325b25da04a50e601b5.js" async=""></script></body></html>